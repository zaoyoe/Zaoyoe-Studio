<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我们的店铺 - 资源导航</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@500;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css?v=20251124_FIX_FINAL">
    <link rel="stylesheet" href="login_styles.css">
    <link rel="stylesheet" href="login_dual_mode.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function () {
            // Replace with your Public Key
            emailjs.init("vawaxLVEzJMAVbut0");
        })();
    </script>
    <!-- LeanCloud SDK -->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.2/dist/av-min.js"></script>
    <script src="./leancloud-init.js" defer></script>
    <script src="./leancloud-auth-functions.js" defer></script>
    <script src="./leancloud-guestbook-functions.js" defer></script>

    <style>
        /* Homepage entrance animation - Subtle */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .glass-box {
            opacity: 0;
            /* Start hidden to prevent flash */
            animation: slideInUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
            /* Smooth entrance */
            /* Transition for magnetic effect - separate from animation */
            transition: transform 0.1s ease-out, background 0.3s ease, box-shadow 0.3s ease;
        }

        /* Subtle stagger animation for each card */
        .glass-box:nth-child(1) {
            animation-delay: 0s;
        }

        .glass-box:nth-child(2) {
            animation-delay: 0.05s;
        }

        .glass-box:nth-child(3) {
            animation-delay: 0.08s;
        }

        .glass-box:nth-child(4) {
            animation-delay: 0.11s;
        }

        .glass-box:nth-child(5) {
            animation-delay: 0.14s;
        }

        .glass-box:nth-child(6) {
            animation-delay: 0.17s;
        }

        .glass-box:nth-child(7) {
            animation-delay: 0.2s;
        }

        .glass-box:nth-child(8) {
            animation-delay: 0.23s;
        }

        .glass-box:nth-child(9) {
            animation-delay: 0.26s;
        }

        .glass-box:nth-child(10) {
            animation-delay: 0.29s;
        }
    </style>
    <script>
        // Page load animation trigger
        document.addEventListener('DOMContentLoaded', function () {
            // Animation already triggered by CSS on load
        });
    </script>
</head>

<body class="shop-page">
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <div class="bento-container">
        <!-- Profile & Clock Card (2x2) -->
        <!-- Profile & Clock Card (2x2) -->
        <div class="glass-box box-profile">
            <div class="profile-header">
                <div class="date-time-compact">
                    <div id="current-time" style="font-size: 1.1rem; color: rgba(255,255,255,0.7); font-weight: 600;">
                        09:15:21</div>
                    <div id="current-date" style="font-size: 0.85rem; color: rgba(255,255,255,0.5); margin-top: 3px;">
                        2025年11月23日</div>
                </div>
            </div>
            <div class="profile-main">
                <div class="shop-heading-large">Zaoyoe 拾光里</div>

            </div>
        </div>

        <!-- Gemini Card (2x1) - Interactive -->
        <div class="glass-box box-wide" onclick="openModal('geminiModal')">
            <!-- Custom SVG for Gemini 4-point Star -->
            <svg class="icon-large gemini-star" viewBox="0 0 24 24" fill="currentColor"
                xmlns="http://www.w3.org/2000/svg" style="width: 48px; height: 48px;">
                <path d="M12 0L14.5 9.5L24 12L14.5 14.5L12 24L9.5 14.5L0 12L9.5 9.5L12 0Z" />
            </svg>
            <div class="box-label">Gemini 专区</div>
        </div>

        <!-- Google Card (2x1) -->
        <a href="#" class="glass-box box-wide" onclick="openModal('googleModal'); return false;">
            <i class="fa-brands fa-google icon-large" style="color: #ea4335;"></i>
            <div class="box-label">Google 邮箱</div>
        </a>

        <!-- Taobao Card (1x1) -->
        <div class="glass-box box-small">
            <i class="fa-solid fa-cart-shopping icon-large" style="color: #ff5000;"></i>
            <div class="box-label">淘宝店铺</div>
        </div>

        <!-- Xianyu Card (1x1) -->
        <div class="glass-box box-small">
            <i class="fa-solid fa-fish icon-large" style="color: #ffda44;"></i>
            <div class="box-label">闲鱼店铺</div>
        </div>

        <!-- 3D Design (2x1) - Wide -->
        <div class="glass-box box-wide" onclick="openModal('comingSoonModal')">
            <i class="fa-solid fa-cube icon-large" style="color: #06b6d4;"></i>
            <div class="box-label">三维设计</div>
        </div>

        <!-- Post-production (2x1) - Wide -->
        <div class="glass-box box-wide" onclick="openModal('comingSoonModal')">
            <i class="fa-solid fa-clapperboard icon-large" style="color: #8b5cf6;"></i>
            <div class="box-label">影视后期</div>
        </div>

        <!-- Contact Card (1x1) - Clickable -->
        <div class="glass-box box-small" onclick="openModal('contactModal')">
            <i class="fa-solid fa-address-card icon-large" style="color: #d946ef;"></i>
            <div class="box-label">联系我们</div>
        </div>

        <!-- Guestbook Card (1x1) - Interactive -->
        <div class="glass-box box-small" onclick="openModal('guestbookModal')">
            <i class="fa-regular fa-comment-dots icon-large" style="color: #f59e0b;"></i>
            <div class="box-label">留言板</div>
        </div>
    </div>



    <!-- Guestbook Modal -->
    <div class="modal-overlay" id="guestbookModal" onclick="closeModal(event)">
        <div class="modal-content guestbook-content premium-modal" style="position: relative;">
            <!-- Mac Window Controls -->
            <div class="mac-controls">
                <div class="mac-dot red" onclick="closeModal(event)">
                    <i class="fas fa-times"></i>
                </div>
                <div class="mac-dot yellow"></div>
                <div class="mac-dot green"></div>
            </div>

            <div class="modal-title">留言板</div>
            <p class="modal-subtitle">
                欢迎留下您的宝贵建议,或告诉我们您期待上架的商品。
            </p>
            <form class="guestbook-form" id="guestbookForm">
                <!-- Nickname input removed - Will use logged in user -->

                <div class="input-group relative-container">
                    <textarea id="guestMessage" placeholder="写下您的留言... (Message)" required></textarea>

                    <!-- Integrated Upload Icon -->
                    <div class="upload-icon-wrapper">
                        <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                        <button type="button" class="upload-icon-btn"
                            onclick="document.getElementById('imageUpload').click()" title="上传图片">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                </div>

                <div id="imagePreview" class="image-preview-container" style="display: none;">
                    <img id="previewImg" src="" alt="Preview">
                    <button type="button" class="remove-image-btn" id="removeImageBtn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <button type="submit" class="submit-btn"
                    style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                    <i class="fas fa-paper-plane"></i>
                    留言
                </button>
            </form>

            <!-- View More Button -->
            <a href="guestbook.html" class="view-more-btn">
                <i class="fas fa-comment-dots"></i>
                查看更多
            </a>
        </div>
    </div>

    <!-- Contact Modal -->
    <div class="modal-overlay" id="contactModal" onclick="closeModal(event)">
        <div class="modal-content premium-modal" style="position: relative;">
            <!-- Mac Window Controls -->
            <div class="mac-controls">
                <div class="mac-dot red" onclick="closeModal(event)">
                    <i class="fas fa-times"></i>
                </div>
            </div>

            <div class="modal-title">联系我们</div>
            <p class="modal-subtitle">
                选择您喜欢的联系方式
            </p>

            <div class="modal-grid">
                <!-- Email Card -->
                <div class="modal-link-card" onclick="copyText('zaoyoe@gmail.com'); event.stopPropagation();"
                    style="cursor: pointer;">
                    <i class="fa-solid fa-envelope"></i>
                    <div class="link-title">电子邮箱</div>
                    <div class="contact-detail" style="font-size: 0.9rem; opacity: 0.8; margin-top: 5px;">
                        zaoyoe@gmail.com</div>
                    <div class="contact-hint" style="font-size: 0.75rem; opacity: 0.5; margin-top: 2px;">(点击复制)</div>
                </div>

                <!-- WeChat Card -->
                <div class="modal-link-card">
                    <i class="fa-brands fa-weixin"></i>
                    <div class="link-title">微信联系</div>
                    <img src="assets/wechat-qr-new.jpg" alt="WeChat QR"
                        style="width: 120px; height: 120px; border-radius: 12px; margin-top: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
                </div>
            </div>
        </div>
    </div>

    <!-- Gemini Modal -->
    <div class="modal-overlay" id="geminiModal" onclick="closeModal(event)">
        <div class="modal-content premium-modal" style="position: relative;">
            <!-- Mac Window Controls -->
            <div class="mac-controls">
                <div class="mac-dot red" onclick="closeModal(event)">
                    <i class="fas fa-times"></i>
                </div>
            </div>

            <div class="modal-title">Gemini 专区</div>
            <p class="modal-subtitle">
                探索 Gemini 的无限可能
            </p>

            <div class="modal-grid">
                <a href="gemini_guide.html" class="modal-link-card">
                    <i class="fa-solid fa-book"></i>
                    <div class="link-title">使用规范</div>
                </a>

                <a href="gemini_binding.html" class="modal-link-card">
                    <i class="fa-solid fa-credit-card"></i>
                    <div class="link-title">绑卡教程</div>
                </a>
            </div>
        </div>
    </div>

    <!-- Google Modal -->
    <div class="modal-overlay" id="googleModal" onclick="closeModal(event)">
        <div class="modal-content premium-modal" style="position: relative;">
            <!-- Mac Window Controls -->
            <div class="mac-controls">
                <div class="mac-dot red" onclick="closeModal(event)">
                    <i class="fas fa-times"></i>
                </div>
            </div>

            <div class="modal-title">Google 邮箱专区</div>
            <p class="modal-subtitle">
                高质量谷歌账号服务
            </p>

            <div class="modal-grid" style="display: flex; justify-content: center;">
                <a href="google_guide.html" class="modal-link-card">
                    <i class="fa-solid fa-book"></i>
                    <div class="link-title">使用规范</div>
                </a>
            </div>
        </div>
    </div>

    <!-- Login Trigger Button (Top Right) -->
    <div class="top-right-nav" style="position: absolute; top: 30px; right: 40px; z-index: 100;">
        <button id="authBtn" class="login-trigger-btn" onclick="handleAuthClick()">
            <!-- Default Icon (shown when logged out) -->
            <i id="defaultAuthIcon" class="fas fa-user-circle" style="font-size: 1.2rem;"></i>

            <!-- User Avatar (shown when logged in) -->
            <img id="navUserAvatar" class="nav-user-avatar" src="" alt="Avatar" style="display: none;">

            <span id="authBtnText">Sign In</span>
        </button>

        <div id="userDropdown" class="user-dropdown">
            <div class="menu-item" id="profileMenuItem"
                style="position: relative; cursor: default; background: none !important; padding-bottom: 20px;">
                <div style="position: relative; cursor: pointer;"
                    onclick="document.getElementById('avatarUpload').click()">
                    <img id="dropdownAvatar" class="nav-user-avatar" src="" alt="Avatar"
                        style="width: 64px; height: 64px; border: 2px solid rgba(255,255,255,0.2); transition: transform 0.1s;">
                    <!-- Overlay Icon for Change Avatar (Positioned at bottom right) -->
                    <div class="avatar-overlay-icon"
                        style="position: absolute; bottom: 0; right: 0; transform: translate(25%, 25%);">
                        <i class="fas fa-camera"></i>
                    </div>
                </div>
                <div
                    style="display: flex; flex-direction: column; gap: 4px; margin-left: 16px; justify-content: center;">
                    <!-- Only show Email as requested -->
                    <span id="profileEmail"
                        style="font-weight: 500; font-size: 14px; color: rgba(255,255,255,0.8); word-break: break-all;"></span>
                </div>
            </div>

            <!-- Hidden File Input -->
            <input type="file" id="avatarUpload" accept="image/*" style="display: none;"
                onchange="handleAvatarUpload(event)">

            <div class="divider" style="margin: 5px 0; border-top: 1px solid rgba(255,255,255,0.1);"></div>

            <div class="menu-item logout" onclick="handleLogout()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Log Out
            </div>
        </div>
    </div>


    <!-- Auth Modal (Dual Mode) -->
    <div class="login-overlay" id="loginModal" onclick="handleLoginOverlayClick(event)">
        <div class="login-card">
            <!-- Mac Window Controls -->
            <div class="mac-controls">
                <div class="mac-dot red" onclick="toggleLoginModal()">
                    <i class="fas fa-times"></i>
                </div>
                <div class="mac-dot yellow"></div>
                <div class="mac-dot green"></div>
            </div>

            <!-- Login View -->
            <div id="loginView" class="form-view">
                <h2 class="card-title">欢迎回来</h2>
                <p class="card-subtitle">请输入您的账号信息以登录</p>

                <!-- Google Login Button -->
                <button type="button" class="google-login-btn" onclick="handleGoogleLogin()">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google"
                        width="18" height="18">
                    使用 Google 登录
                </button>

                <!-- Divider -->
                <div class="login-divider">
                    <span>或者</span>
                </div>

                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="input-group">
                        <input type="email" id="login-email" class="glass-input" placeholder="邮箱地址" required>
                    </div>
                    <div class="input-group">
                        <input type="password" id="login-password" class="glass-input" placeholder="密码" required>
                    </div>

                    <!-- Forgot Password Link -->
                    <div style="text-align: right; margin-bottom: 16px;">
                        <span class="forgot-password-link" onclick="switchAuthView('reset')">忘记密码了吗？</span>
                    </div>

                    <!-- Remember Me Checkbox -->
                    <div class="checkbox-wrapper"
                        style="margin-bottom: 24px; display: flex; align-items: center; gap: 8px; color: rgba(255,255,255,0.7); font-size: 13px;">
                        <input type="checkbox" id="rememberMe" class="custom-checkbox"
                            style="width: 16px; height: 16px; accent-color: #9b5de5; cursor: pointer;">
                        <label for="rememberMe" style="cursor: pointer;">记住密码 (30天内免登录)</label>
                    </div>

                    <button type="submit" class="login-submit-btn">登录</button>
                </form>

                <div class="switch-text">
                    还没有账号？
                    <span class="switch-link" onclick="switchAuthView('register')">立即注册</span>
                </div>
            </div>

            <!-- Register View -->
            <div id="registerView" class="form-view hidden">
                <h2 class="card-title">创建账号</h2>
                <p class="card-subtitle">加入我们以获取更多高级功能</p>

                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="input-group">
                        <input type="text" id="reg-username" class="glass-input" placeholder="用户名" required>
                    </div>

                    <div class="input-group">
                        <input type="email" id="reg-email" class="glass-input" placeholder="邮箱地址" required>
                    </div>

                    <div class="input-group input-with-action">
                        <input type="text" id="reg-code" class="glass-input" placeholder="输入6位验证码" maxlength="6"
                            required>
                        <button type="button" class="verify-code-btn" id="sendBtn" onclick="sendVerificationCode()">
                            获取验证码
                        </button>
                    </div>

                    <div class="input-group">
                        <input type="password" id="reg-password" class="glass-input" placeholder="设置密码" required>
                    </div>

                    <button type="submit" class="login-submit-btn">创建账号</button>
                </form>

                <div class="switch-text">
                    已有账号？
                    <span class="switch-link" onclick="switchAuthView('login')">直接登录</span>
                </div>
            </div>

            <!-- Password Reset View -->
            <div id="resetView" class="form-view hidden">
                <h2 class="card-title">找回密码</h2>
                <p class="card-subtitle">请输入您的注册邮箱以重置密码</p>

                <form id="resetForm" onsubmit="handlePasswordReset(event)">
                    <div class="input-group">
                        <input type="email" id="reset-email" class="glass-input" placeholder="电子邮箱" required>
                    </div>

                    <button type="submit" class="login-submit-btn" style="margin-top: 24px;">找回</button>
                </form>

                <div class="switch-text">
                    没有账户？
                    <span class="switch-link" onclick="switchAuthView('register')">注册</span>
                </div>
                <div class="switch-text" style="margin-top: 10px;">
                    <span class="switch-link back-to-login" onclick="switchAuthView('login')">返回登录</span>
                </div>
            </div>

        </div>
    </div>

    <!-- Coming Soon Modal -->
    <div class="modal-overlay" id="comingSoonModal" onclick="closeModal(event)">
        <div class="modal-content premium-modal"
            style="position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 300px;">
            <!-- Mac Window Controls -->
            <div class="mac-controls" style="position: absolute; top: 20px; left: 20px;">
                <div class="mac-dot red" onclick="closeModal(event)">
                    <i class="fas fa-times"></i>
                </div>
            </div>

            <i class="fa-solid fa-rocket" style="font-size: 4rem; color: #8b5cf6; margin-bottom: 20px;"></i>
            <div class="modal-title">敬请期待</div>
            <p class="modal-subtitle">
                该功能正在紧锣密鼓地开发中...
            </p>
        </div>
    </div>

    <!-- Elastic Press Effect -->
    <script src="elastic-press.js?v=20251124_RESTORED" defer></script>
    <script src="script.js?v=20251124_FIX_FINAL" defer></script>
</body>

</html>